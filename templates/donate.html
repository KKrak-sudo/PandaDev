<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пожертвования - Новостной портал</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body class="{{ session.get('theme', 'dark-theme') }}">
    <header>
        <div>
            <h1>Новостной портал</h1>
            <nav>
                <a href="{{ url_for('homepage') }}">Главная</a>
                {% for category in categories %}
                <a href="{{ url_for('category_page', category_id=category.id) }}">{{ category.name }}</a>
                {% endfor %}
            </nav>
        </div>
        <div>
            {% if user %}
                <span>{{ user.username }}</span>
                <a href="{{ url_for('profile') }}">Личный кабинет</a>
                {% if user.is_admin %}
                <a href="{{ url_for('admin_panel') }}" class="admin-link">Админ-панель</a>
                {% endif %}
                <a href="{{ url_for('logout') }}">Выход</a>
                <label class="theme-switch">
                    <span class="theme-switch-label">Тема:</span>
                    <input type="checkbox" id="theme-toggle" {% if session.get('theme') == 'light-theme' %}checked{% endif %}>
                    <span class="slider"></span>
                </label>
            {% else %}
                <a href="{{ url_for('login_get') }}">Вход</a>
                <a href="{{ url_for('register_get') }}">Регистрация</a>
                <label class="theme-switch">
                    <span class="theme-switch-label">Тема:</span>
                    <input type="checkbox" id="theme-toggle" {% if session.get('theme') == 'light-theme' %}checked{% endif %}>
                    <span class="slider"></span>
                </label>
            {% endif %}
        </div>
    </header>

    <main>
        <h2>Поддержать проект</h2>

        <section class="donate-section">
            <p>Поддержите наш проект, чтобы мы могли продолжать предоставлять качественные новости и развивать портал.</p>
            
            <div class="donation-tiers">
                <div class="donation-tier">
                    <h3>Базовая поддержка</h3>
                    <p class="donation-amount">100 ₽</p>
                    <p>Разовое пожертвование для поддержки нашего сервиса.</p>
                    <a href="{{ url_for('process_donation', amount=100) }}" class="donate-btn">Поддержать</a>
                </div>
                
                <div class="donation-tier highlighted">
                    <h3>Стандартная поддержка</h3>
                    <p class="donation-amount">500 ₽</p>
                    <p>Помогите нам оплатить сервера и доработать функционал.</p>
                    <a href="{{ url_for('process_donation', amount=500) }}" class="donate-btn">Поддержать</a>
                </div>
                
                <div class="donation-tier">
                    <h3>Премиум поддержка</h3>
                    <p class="donation-amount">1000 ₽</p>
                    <p>Станьте премиум-спонсором нашего проекта.</p>
                    <a href="{{ url_for('process_donation', amount=1000) }}" class="donate-btn">Поддержать</a>
                </div>
            </div>
            
            <div class="custom-donation">
                <h3>Своя сумма</h3>
                <form action="{{ url_for('process_donation') }}" method="get">
                    <div class="custom-amount-input">
                        <input type="number" id="amount" name="amount" min="10" placeholder="Введите сумму" required>
                        <span class="currency">₽</span>
                    </div>
                    <button type="submit" class="donate-btn">Поддержать</button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <p>Все права защищены &copy; PandaDev</p>
    </footer>

    <script>
        // Обработчик для переключения темы
        document.getElementById('theme-toggle').addEventListener('change', function() {
            if (this.checked) {
                document.body.classList.remove('dark-theme');
                document.body.classList.add('light-theme');
                document.cookie = "theme=light-theme; path=/; max-age=31536000";
            } else {
                document.body.classList.remove('light-theme');
                document.body.classList.add('dark-theme');
                document.cookie = "theme=dark-theme; path=/; max-age=31536000";
            }
            
            // Отправляем запрос на обновление темы
            fetch('/update_theme', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    theme: this.checked ? 'light-theme' : 'dark-theme'
                })
            });
        });
    </script>
</body>
</html>